var Demand=function(){function e(e){var t="";for(var n in e){if(e.hasOwnProperty(n)===false)continue;if(Array.isArray(e[n])===true){for(var r=0,i=e[n].length;r<i;r++){if(t!=="")t+="&";t+=encodeURIComponent(n+"[]")+"="+encodeURIComponent(e[n][r])}}else{if(t!=="")t+="&";t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}}return t}function t(e,t){if(typeof e!=="string"){throw new Error("Can't issue Demand without a proper url parameter")}if(typeof t!=="undefined"&&typeof t!=="object"){throw new Error("`options` set but is not an object")}var n=this;this.url=e;this.xhr=new XMLHttpRequest;this.events={};if(typeof t==="object"){for(var r in t){if(t.hasOwnProperty(r)===false||typeof t[r]!=="function")continue;this.on(r,t[r])}}if(this.xhr.upload){this.xhr.upload.addEventListener("progress",function(e){n.trigger("uploadprogress",this,e)})}this.xhr.addEventListener("progress",function(e){n.trigger("progress",this,e)});this.xhr.addEventListener("readystatechange",function(e){if(this.readyState===4){n.trigger("complete",this,e);if(this.status>=200&&this.status<300)n.trigger("success",this,e);else n.trigger("failure",this,e)}});this.xhr.addEventListener("abort",function(e){n.trigger("abort",this,e)})}t.prototype.head=function(){this.xhr.open("HEAD",this.url,true);this.xhr.send(null)};t.prototype.options=function(){this.xhr.open("OPTIONS",this.url,true);this.xhr.send(null)};t.prototype.get=function(){this.xhr.open("GET",this.url,true);this.xhr.send(null)};t.prototype.post=function(t){this.xhr.open("POST",this.url,true);if(typeof t==="string"||t instanceof FormData===true){this.xhr.send(t)}else{this.xhr.send(e(t))}};t.prototype.put=function(t){this.xhr.open("PUT",this.url,true);if(typeof t==="string"||t instanceof FormData===true){this.xhr.send(t)}else{this.xhr.send(e(t))}};t.prototype.delete=function(){this.xhr.open("DELETE",this.url,true);this.xhr.send(null)};t.prototype.raw=function(e,t,n){if(typeof e!=="string")return false;if(typeof t==="undefined")t=null;if(typeof n==="undefined")n=true;else if(typeof n!=="boolean")return false;this.xhr.open(e,this.url,n);this.xhr.send(t)};t.prototype.abort=function(){this.xhr.abort()};t.prototype.on=function(e,t){if(typeof t!=="function")return false;this.events[e]=t};t.prototype.trigger=function(e){if(typeof this.events[e]==="undefined")return false;var t=Array.prototype.slice.call(arguments,1);this.events[e].apply(this.xhr,t)};return t}()